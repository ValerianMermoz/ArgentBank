{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  token: null,\n  firstName: null,\n  lastName: null\n};\nconst {\n  actions,\n  reducer\n} = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {\n    login: (state, action) => {\n      state.token = action.payload;\n      return;\n    },\n    logout: () => {\n      return initialState;\n    },\n    update: (state, action) => {\n      state.firstName = action.payload.firstName;\n      state.lastName = action.payload.lastName;\n      return;\n    }\n  }\n});\nexport const {\n  login,\n  logout,\n  update\n} = actions;\nexport default reducer;\nconst BASE_URL_API = 'http://localhost:3001/api/v1/';\nexport function Login(e, store) {\n  e.preventDefault();\n  const email = e.target[0].value;\n  const password = e.target[1].value;\n  const remember = e.target[2].checked;\n  const submitButton = document.getElementsByClassName('sign-in-button')[0];\n  const errorText = document.getElementsByClassName('errorText')[0];\n\n  // Reset animation\n  submitButton.style.animation = '';\n\n  // Store field values when 'Remember me' is checked\n  if (remember) {\n    localStorage.username = email;\n    localStorage.remember = true;\n  } else {\n    delete localStorage.username;\n    delete localStorage.remember;\n  }\n  axios.post(`${BASE_URL_API}user/login`, {\n    email: email,\n    password: password\n  }).then(response => {\n    // Add Bearer for API\n    const token = `Bearer ${response.data.body.token}`;\n    store.dispatch(login(token));\n  }).catch(() => {\n    submitButton.classList.add('errorButton');\n    submitButton.style.animation = 'shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both';\n    errorText.classList.remove('hide');\n  });\n}\n\n// // name: 'login',\n// // initialState,\n// // reducers: {\n// //   changeIsLogged: (state) => {\n\n// //     state.isLogged = !state.isLogged\n// //   },\n// // },\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["createSlice","axios","initialState","token","firstName","lastName","actions","reducer","name","reducers","login","state","action","payload","logout","update","BASE_URL_API","Login","e","store","preventDefault","email","target","value","password","remember","checked","submitButton","document","getElementsByClassName","errorText","style","animation","localStorage","username","post","then","response","data","body","dispatch","catch","classList","add","remove","_c","$RefreshReg$"],"sources":["C:/Users/valer/GitHub/ArgentBank-website-main/Front/src/slice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst initialState = {\r\n  token: null,\r\n  firstName: null,\r\n  lastName: null,\r\n};\r\n\r\nconst { actions, reducer } = createSlice({\r\n  name: 'user',\r\n  initialState: initialState,\r\n  reducers: {\r\n    login: (state, action) => {\r\n      state.token = action.payload;\r\n      return;\r\n    },\r\n    logout: () => {\r\n      return initialState;\r\n    },\r\n    update: (state, action) => {\r\n      state.firstName = action.payload.firstName;\r\n      state.lastName = action.payload.lastName;\r\n      return;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { login, logout, update } = actions;\r\nexport default reducer;\r\n\r\nconst BASE_URL_API = 'http://localhost:3001/api/v1/';\r\n\r\nexport function Login(e, store) {\r\n  e.preventDefault();\r\n  const email = e.target[0].value;\r\n  const password = e.target[1].value;\r\n  const remember = e.target[2].checked;\r\n  const submitButton = document.getElementsByClassName('sign-in-button')[0];\r\n  const errorText = document.getElementsByClassName('errorText')[0];\r\n\r\n  // Reset animation\r\n  submitButton.style.animation = '';\r\n\r\n  // Store field values when 'Remember me' is checked\r\n  if (remember) {\r\n    localStorage.username = email;\r\n    localStorage.remember = true;\r\n  } else {\r\n    delete localStorage.username;\r\n    delete localStorage.remember;\r\n  }\r\n\r\n  axios\r\n    .post(`${BASE_URL_API}user/login`, {\r\n      email: email,\r\n      password: password,\r\n    })\r\n    .then((response) => {\r\n      // Add Bearer for API\r\n      const token = `Bearer ${response.data.body.token}`;\r\n      store.dispatch(login(token));\r\n    })\r\n    .catch(() => {\r\n      submitButton.classList.add('errorButton');\r\n      submitButton.style.animation =\r\n        'shake 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both';\r\n      errorText.classList.remove('hide');\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n// // name: 'login',\r\n// // initialState,\r\n// // reducers: {\r\n// //   changeIsLogged: (state) => {\r\n\r\n// //     state.isLogged = !state.isLogged\r\n// //   },\r\n// // },\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAIzB,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE,IAAI;EACfC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAM;EAAEC,OAAO;EAAEC;AAAQ,CAAC,GAAGP,WAAW,CAAC;EACvCQ,IAAI,EAAE,MAAM;EACZN,YAAY,EAAEA,YAAY;EAC1BO,QAAQ,EAAE;IACRC,KAAK,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MACxBD,KAAK,CAACR,KAAK,GAAGS,MAAM,CAACC,OAAO;MAC5B;IACF,CAAC;IACDC,MAAM,EAAEA,CAAA,KAAM;MACZ,OAAOZ,YAAY;IACrB,CAAC;IACDa,MAAM,EAAEA,CAACJ,KAAK,EAAEC,MAAM,KAAK;MACzBD,KAAK,CAACP,SAAS,GAAGQ,MAAM,CAACC,OAAO,CAACT,SAAS;MAC1CO,KAAK,CAACN,QAAQ,GAAGO,MAAM,CAACC,OAAO,CAACR,QAAQ;MACxC;IACF;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEK,KAAK;EAAEI,MAAM;EAAEC;AAAO,CAAC,GAAGT,OAAO;AAChD,eAAeC,OAAO;AAEtB,MAAMS,YAAY,GAAG,+BAA+B;AAEpD,OAAO,SAASC,KAAKA,CAACC,CAAC,EAAEC,KAAK,EAAE;EAC9BD,CAAC,CAACE,cAAc,CAAC,CAAC;EAClB,MAAMC,KAAK,GAAGH,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK;EAC/B,MAAMC,QAAQ,GAAGN,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK;EAClC,MAAME,QAAQ,GAAGP,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,CAACI,OAAO;EACpC,MAAMC,YAAY,GAAGC,QAAQ,CAACC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;EACzE,MAAMC,SAAS,GAAGF,QAAQ,CAACC,sBAAsB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEjE;EACAF,YAAY,CAACI,KAAK,CAACC,SAAS,GAAG,EAAE;;EAEjC;EACA,IAAIP,QAAQ,EAAE;IACZQ,YAAY,CAACC,QAAQ,GAAGb,KAAK;IAC7BY,YAAY,CAACR,QAAQ,GAAG,IAAI;EAC9B,CAAC,MAAM;IACL,OAAOQ,YAAY,CAACC,QAAQ;IAC5B,OAAOD,YAAY,CAACR,QAAQ;EAC9B;EAEAxB,KAAK,CACFkC,IAAI,CAAE,GAAEnB,YAAa,YAAW,EAAE;IACjCK,KAAK,EAAEA,KAAK;IACZG,QAAQ,EAAEA;EACZ,CAAC,CAAC,CACDY,IAAI,CAAEC,QAAQ,IAAK;IAClB;IACA,MAAMlC,KAAK,GAAI,UAASkC,QAAQ,CAACC,IAAI,CAACC,IAAI,CAACpC,KAAM,EAAC;IAClDgB,KAAK,CAACqB,QAAQ,CAAC9B,KAAK,CAACP,KAAK,CAAC,CAAC;EAC9B,CAAC,CAAC,CACDsC,KAAK,CAAC,MAAM;IACXd,YAAY,CAACe,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;IACzChB,YAAY,CAACI,KAAK,CAACC,SAAS,GAC1B,uDAAuD;IACzDF,SAAS,CAACY,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC;EACpC,CAAC,CAAC;AACN;;AAKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAAAC,EAAA,GAhDgB5B,KAAK;AAAA,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}